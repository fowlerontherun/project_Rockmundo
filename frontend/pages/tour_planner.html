
<h2>Tour Planner</h2>

<form id="tourForm">
  <input type="text" name="title" placeholder="Tour Name" required />
  <input type="text" name="band_id" placeholder="Band ID" required />
  <input type="text" name="start_date" placeholder="Start Date (YYYY-MM-DD)" required />
  <input type="text" name="end_date" placeholder="End Date (YYYY-MM-DD)" required />
  <input type="text" name="vehicle_type" placeholder="Vehicle (van, bus, truck, plane)" required />
  <textarea name="route" placeholder="Cities (comma-separated)" required></textarea>
  <button type="submit">Create Tour</button>
</form>

<script>
document.getElementById('tourForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  const payload = {
    title: formData.get('title'),
    band_id: parseInt(formData.get('band_id')),
    start_date: formData.get('start_date'),
    end_date: formData.get('end_date'),
    vehicle_type: formData.get('vehicle_type'),
    route: formData.get('route').split(',').map(c => c.trim())
  };

  const res = await fetch('/tours', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });

  const result = await res.json();
  alert(JSON.stringify(result));
});
</script>
