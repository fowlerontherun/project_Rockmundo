<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Song Collaboration</title>
  <script>
    async function loadVersions(draftId) {
      const res = await fetch(`/songwriting/drafts/${draftId}/versions`);
      const versions = await res.json();
      const list = document.getElementById('versions');
      list.innerHTML = '';
      const contributors = new Set();
      versions.forEach(v => {
        const li = document.createElement('li');
        const ts = new Date(v.timestamp).toLocaleString();
        li.textContent = `${ts} - Author ${v.author_id}`;
        list.appendChild(li);
        contributors.add(v.author_id);
      });
      const clist = document.getElementById('contributors');
      clist.innerHTML = '';
      contributors.forEach(id => {
        const li = document.createElement('li');
        li.textContent = `User ${id}`;
        clist.appendChild(li);
      });
    }
    window.onload = () => loadVersions(1);
  </script>
</head>
<body>
  <h1>Collaborative Song Editor</h1>
  <textarea id="lyrics" rows="10" cols="60"></textarea>
  <h3>Version History</h3>
  <ul id="versions"></ul>
  <h3>Contributors</h3>
  <ul id="contributors"></ul>
</body>
</html>
