<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RockMundo Daily</title>
    <link rel="stylesheet" href="../index.css">
</head>
<body>
    <button id="theme-toggle">Toggle Theme</button>
    <h1>Welcome to RockMundo</h1>
    <div id="notification-root"></div>
    <div id="daily-banner">
        <p id="streak">Streak: --</p>
        <p id="challenge">Today's challenge: --</p>
        <p id="reward">Reward: --</p>
        <button id="claim-btn">Claim Reward</button>
    </div>
    <script src="../components/themeToggle.js"></script>
    <script src="../components/header.js"></script>
    <script src="../components/notification.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script type="module" src="../components/NotificationCenter.jsx"></script>
    <script>
    async function loadDaily() {
        const res = await fetch('/api/daily/status/1');
        const data = await res.json();
        document.getElementById('streak').textContent = `Streak: ${data.login_streak}`;
        document.getElementById('challenge').textContent = `Today's challenge: ${data.current_challenge}`;
        document.getElementById('reward').textContent = data.reward_claimed ? 'Reward: claimed' : 'Reward: available';
        document.getElementById('claim-btn').disabled = data.reward_claimed;
    }
    document.getElementById('claim-btn').addEventListener('click', async () => {
        await fetch('/api/daily/claim', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ user_id: 1 })
        });
        loadDaily();
    });
    loadDaily();
    </script>
</body>
</html>
